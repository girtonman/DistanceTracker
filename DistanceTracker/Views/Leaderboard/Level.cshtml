@using DistanceTracker.Models
@model LeaderboardViewModel

@{
	ViewData["Title"] = "TODO: Make this the leaderboard name";
}

<div class="text-center">
	<div class="row">
		<div class="col">
			<h4 class="text-left">Global Leaderboard (Official Sprints)</h4>
			<table class="table table-striped table-dark">
				<thead>
					<tr>
						<th class="text-left">Rank</th>
						<th class="text-left">Player</th>
						<th>Points</th>
						<th>Rating</th>
					</tr>
				</thead>
				<tbody>
					@foreach(var entry in Model.LeaderboardEntries)
					{
						<tr>
							<td class="text-left">@entry.Rank</td>
							<td class="text-left"><a class="link" href="/Player?steamID=@entry.Player.SteamID">@entry.Player.Name</a></td>
							<td>@entry.NoodlePoints.ToString("0")</td>
							<td>@entry.PlayerRating.ToString("0.00")</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
		<div class="col">
			<div class="row">
				<div style="margin-bottom: 50px; margin-top: 30px" class="col-12">
					<h1 class="display-1">@Model.Leaderboard.LevelName</h1>
					<img src="~/images/@(Model.Leaderboard.LevelName).bytes.png"/>
				</div>
				<div class="col">
					<h4 class="text-left">Recent Improvements</h4>
					<table class="table table-striped table-dark small">
						<thead>
							<tr>
								<th>Player</th>
								<th>Rank</th>
								<th>Time</th>
								<th>When</th>
							</tr>
						</thead>
						<tbody>
							@foreach(var entry in Model.RecentImprovements)
							{
								<tr>
									<td><a class="link" href="/Player?steamID=@entry.Player.SteamID">@entry.Player.Name</a></td>
									<td>@entry.NewRank ( <i class="fas fa-arrow-up fa-sm text-success"></i> @(entry.OldRank - entry.NewRank) )</td>
									<td>@Formatter.TimeFromMs(entry.NewMilliseconds) ( <i class="fas fa-arrow-up fa-sm text-success"></i> @Formatter.TimeFromMs(entry.OldMilliseconds-entry.NewMilliseconds) )</td>
									<td>@Formatter.TimeAgoFromUnixTime(entry.UpdatedTimeUTC)</td>
								</tr>
							}
						</tbody>
					</table>
				</div>
				<div class="col">
					<h4 class="text-left">Recent First Sightings</h4>
					<table class="table table-striped table-dark small">
						<thead>
							<tr>
								<th>Player</th>
								<th>Time</th>
								<th>When</th>
							</tr>
						</thead>
						<tbody>
							@foreach(var entry in Model.RecentFirstSightings)
							{
								<tr>
									<td><a class="link" href="/Player?steamID=@entry.Player.SteamID">@entry.Player.Name</a></td>
									<td>@Formatter.TimeFromMs(entry.Milliseconds)</td>
									<td>@Formatter.TimeAgoFromUnixTime(entry.FirstSeenTimeUTC)</td>
								</tr>
							}
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>

</div>
