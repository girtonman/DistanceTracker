@using DistanceTracker.Models
@model HomepageViewModel

@{
	ViewData["Title"] = "Home Page";
}

<div class="text-center">
	<div class="row">
		<div class="col">
			<h4 class="text-left">Recent Improvements</h4>
			<table class="table table-striped table-dark">
				<thead>
					<tr>
						<th>Player</th>
						<th>Track</th>
						<th>Rank</th>
						<th>Time</th>
						<th>When</th>
					</tr>
				</thead>
				<tbody>
					@foreach(var entry in Model.RecentImprovements)
					{
						<tr>
							<td><a class="link" href="/Player?steamID=@entry.Player.SteamID">@entry.Player.Name</a></td>
							<td>@entry.Leaderboard.LevelName</td>
							<td>@entry.NewRank ( <i class="fas fa-arrow-up fa-sm text-success"></i> @(entry.OldRank - entry.NewRank) )</td>
							<td>@Formatter.TimeFromMs(entry.NewMilliseconds) ( <i class="fas fa-arrow-up fa-sm text-success"></i> @Formatter.TimeFromMs(entry.OldMilliseconds-entry.NewMilliseconds) )</td>
							<td>@Formatter.TimeAgoFromUnixTime(entry.UpdatedTimeUTC)</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
		<div class="col">
			<h4 class="text-left">Recent First Sightings</h4>
			<table class="table table-striped table-dark">
				<thead>
					<tr>
						<th>Player</th>
						<th>Track</th>
						<th>Time</th>
						<th>When</th>
					</tr>
				</thead>
				<tbody>
					@foreach(var entry in Model.RecentFirstSightings)
					{
						<tr>
							<td><a class="link" href="/Player?steamID=@entry.Player.SteamID">@entry.Player.Name</a></td>
							<td>@entry.Leaderboard.LevelName</td>
							<td>@Formatter.TimeFromMs(entry.Milliseconds)</td>
							<td>@Formatter.TimeAgoFromUnixTime(entry.FirstSeenTimeUTC)</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
	</div>

</div>
