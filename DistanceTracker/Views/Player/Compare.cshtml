@using DistanceTracker.Models
@model PlayerComparisonViewModel

@{
	ViewData["Title"] = $"Player Comparison";
}

<div class="text-center">
	<div class="row">
		<div class="col">
			<h4 class="text-left">Track Rankings Comparison: @Model.LeftPlayer.Name and @Model.RightPlayer.Name</h4>
			<table class="table table-striped table-dark">
				<thead>
					<tr>
						<th>Track</th>
						<th>@Model.LeftPlayer.Name's Rank</th>
						<th>@Model.RightPlayer.Name's Rank</th>
					</tr>
				</thead>
				<tbody>
					@foreach(var row in Model.Comparisons)
					{
						var leftExists = row.LeftEntry != null;
						var rightExists = row.RightEntry != null;
						var isLeftBetter = !rightExists || (leftExists && row.LeftEntry.Rank < row.RightEntry.Rank);
						<tr>
							<td>@row.Leaderboard.LevelName</td>
							@if (leftExists)
							{
								<td><span class="@(isLeftBetter ? "text-success" : "")">@row.LeftEntry.Rank</span></td>
							}
							else
							{
								<td></td>
							}
							@if (rightExists)
							{
								<td><span class="@(!isLeftBetter ? "text-success" : "")">@row.RightEntry.Rank</span></td>
							}
							else
							{
								<td></td>
							}
						</tr>
					}
				</tbody>
			</table>
		</div>
	</div>

</div>
